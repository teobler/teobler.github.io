<!DOCTYPE html>


  <html lang="zh-CN" class="light page-post">


<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="zh-CN">
  
  <title>函数式初识(1) - 为什么要用函数式编程(以JS为例) | teobler&#39;s blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="FP,函数式编程," />
  

  <meta name="360-site-verification" content="7b29d0e6eb0d7a16d22f9d0961882c3a" />
  <meta name="sogou_site_verification" content="S1EAZKO83i"/>

  <meta name="description" content="首先需要说明的是，这篇文章是以JS为例的，而JS并不是一个以函数式设计的语言，它仅仅是可以做到函数式，那么既然如此我为何还要以JS为例呢？很简单，因为我是一名前端，目前我只会JS。第二个前提条件是，我们假设所有你参与的项目不可能是你一个人完成的。 函数式编程在React团队推出Hooks方案之后在前端领域算是掀起了一股小热潮，于是在各大网站上一些问题的热度突然就起来了，比如为啥要用函数式编程？而为">
<meta name="keywords" content="FP,函数式编程">
<meta property="og:type" content="article">
<meta property="og:title" content="函数式初识(1) - 为什么要用函数式编程(以JS为例)">
<meta property="og:url" content="https://teobler.com/20190818-why-fp.html">
<meta property="og:site_name" content="teobler&#39;s blog">
<meta property="og:description" content="首先需要说明的是，这篇文章是以JS为例的，而JS并不是一个以函数式设计的语言，它仅仅是可以做到函数式，那么既然如此我为何还要以JS为例呢？很简单，因为我是一名前端，目前我只会JS。第二个前提条件是，我们假设所有你参与的项目不可能是你一个人完成的。 函数式编程在React团队推出Hooks方案之后在前端领域算是掀起了一股小热潮，于是在各大网站上一些问题的热度突然就起来了，比如为啥要用函数式编程？而为">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://teobler-image.s3-us-west-1.amazonaws.com/readability-for-FP.png">
<meta property="og:updated_time" content="2020-02-15T02:49:44.536Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="函数式初识(1) - 为什么要用函数式编程(以JS为例)">
<meta name="twitter:description" content="首先需要说明的是，这篇文章是以JS为例的，而JS并不是一个以函数式设计的语言，它仅仅是可以做到函数式，那么既然如此我为何还要以JS为例呢？很简单，因为我是一名前端，目前我只会JS。第二个前提条件是，我们假设所有你参与的项目不可能是你一个人完成的。 函数式编程在React团队推出Hooks方案之后在前端领域算是掀起了一股小热潮，于是在各大网站上一些问题的热度突然就起来了，比如为啥要用函数式编程？而为">
<meta name="twitter:image" content="https://teobler-image.s3-us-west-1.amazonaws.com/readability-for-FP.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  

  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158204206-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158204206-1');
</script>



  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>


  
  <script src="https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba" id="sozz"></script>



  
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  <script data-ad-client="ca-pub-8160236896214353" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">导航</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">导航</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/categories/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tags/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>

<div id="post-container" class="container">
  <div class="content content-post CENTER">
     <article id="post-20180818-why-fp" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">函数式初识(1) - 为什么要用函数式编程(以JS为例)</h1>

    <div class="article-meta">
       <div>
          <span>
            <i class="icon-calendar"></i>
            <span>2019.08.18</span>
          </span>

          
            <span class="article-author">
              <i class="icon-user"></i>
              <span>teobler</span>
            </span>
          

          
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/技术细节/">技术细节</a>
  </span>



          
            <span>
              <i class="icon-comment"></i>
              <a href="https://teobler.com/20190818-why-fp.html#disqus_thread"></a>
            </span>
          

          
          <i class="fa fa-eye"></i>
            <span id="busuanzi_container_page_pv">
               &nbsp热度 <span id="busuanzi_value_page_pv">
               <i class="fa fa-spinner fa-spin"></i></span>℃
            </span>
          

          
      </div>

      <div>
        <i class="icon-text"></i>
        <span class="post-count">全篇字数: 1.8k</span>
        &nbsp
        <i class="icon-calendar-1"></i>
        <span class="post-count">预计花费: 6分钟</span>
      </div>
      
    </div>
  </header>

  <div class="article-content">
    
      <p><em>首先需要说明的是，这篇文章是以JS为例的，而JS并不是一个以函数式设计的语言，它仅仅是可以做到函数式，那么既然如此我为何还要以JS为例呢？很简单，因为我是一名前端，目前我只会JS。第二个前提条件是，我们假设所有你参与的项目不可能是你一个人完成的。</em></p>
<p>函数式编程在React团队推出Hooks方案之后在前端领域算是掀起了一股小热潮，于是在各大网站上一些问题的热度突然就起来了，比如为啥要用函数式编程？而为了解释这个问题，就不得不提到两个编程思想。</p>
<h2 id="命令式编程-Imperative-Programming-vs-声明式编程-Declarative-Programming"><a href="#命令式编程-Imperative-Programming-vs-声明式编程-Declarative-Programming" class="headerlink" title="命令式编程(Imperative Programming) vs 声明式编程(Declarative Programming)"></a>命令式编程(Imperative Programming) vs 声明式编程(Declarative Programming)</h2><p>命令式编程更加注重于<strong>如何(how)</strong>去实现某件事。</p>
<p>例如给你一个数组求和，命令式的方法基本就是，声明一个变量total，然后来一个for循环，把每一个元素加到之前的total变量中，然后return。这种风格一步一步告诉计算机该怎么做，性能表现也相对优异。但是当过几天另外一个人来读这些代码的时候，他需要一行一行把代码加载到大脑里，然后人脑运算，得出结论，哦，这个for循环是求和。声明式的代码往往要强制让人们在自己的大脑中运行代码然后理解代码中的每一行做了什么事情，而运行代码显然不是我们人脑在行的，而这个运行代码的过程往往只是为了理解这些代码在干嘛。</p>
<p>而声明式的代码风格就不那么注重于如何去做，声明式的代码更注重于代码的<strong>产出(what)</strong>。还是以数组求和为例，声明式的代码基本就只有一句sum函数，传参，拿到结果。这个时候可能熟悉JS的同学会说，可是sum函数还是要你去实现啊。这就是为什么JS是支持声明式的而不是完全声明式的。一些纯函数式的语言比如Haskell会提供许多已经实现的功能，你需要做的就是讲这些功能组合起来，去得到你想要的结果，至于里面是怎么实现的，你可以不用关心，就如同你将渲染逻辑交给了React而不用关心他的实现是不是有什么问题。</p>
<p>可以看出声明式的代码可读性要强于命令式编程，原因是我们把运行代码这部分内容让更擅长的计算机来做了，我们需要做的仅仅是维护语义化很强的代码，我们不用在头脑里再运行一次代码，看这段代码究竟在干嘛。而说到代码维护，就又不得不提到<strong>注释</strong>。</p>
<blockquote>
<p>people always says, comments is a eval, if code has comments, that’s means the code is terrible. Code need to self document itself. I would say no, Code doesn’t need to self document itself. Code needs to tell a story, it needs to communicate, that’s for true. </p>
<p>There is a purpose for code comments. They’re not an excuse for not caring about your code. A lot of people will go to the other extreme and say, what does it matter how bad the code as long as there’s a code comment, and I explanined what I was doing. </p>
<p>A bad code comment is worse than no comment at all. You don’t have to remove all comments, but your comment should not duplicate the narrative of what the code is doing. comments should explan why, not how, sometimes maybe it needs to focus on the how if it’s particularly confusing, if theres’s something particularly hard to understand. what if your code made it obvious why it was doing something.</p>
</blockquote>
<p>所以<strong>好的</strong>声明式的代码读起来更像是一份文档，甚至是一篇故事，你只有在发现故事无法进行下去的时候才需要去加一些注释。</p>
<p>所以说了这么多，我们<strong>为什么用函数式编程</strong>呢？一个比较大的原因是因为函数式编程<strong>相对</strong>于其他的编程范式来说要“更加声明式”，读起来更加“自然”。它把代码运行层面的东西都交给了计算机(所以函数式也经常被人吐槽性能问题，比如immutable)，人们可以把自己的精力放在代码的逻辑和维护上面来，用人话说就是，可读性相对更强。</p>
<h2 id="可读性"><a href="#可读性" class="headerlink" title="可读性"></a>可读性</h2><p>这个时候一定会有人吐槽：兄嘚，别忽悠了，我们组张三在组里推函数式，他那代码，我打包票，三天后他自己都看不懂。</p>
<p>兄弟，别急，坐下来喝口水，我们继续来看看这张图：</p>
<p><img src="https://teobler-image.s3-us-west-1.amazonaws.com/readability-for-FP.png" alt="readability-for-FP"></p>
<p>这张图我们假设一个人是从命令式转到声明式来的，横轴是转换过程中所处的阶段，纵轴是这个人所写代码的可读性。然后我们来解读一下这张图：</p>
<p>首先在0点位置，作为程序员我们假设大家写的代码都是有一定的可读性的，这个时候他想把自己的代码风格转换成声明式的，于是他的代码会有一段时间的可读性增长。就像是你在JS里第一次接触了foreach、map、reduce一样，你会开始逐渐抛弃for循环。记得刚进公司的时候我跟同事探讨过这个问题，为什么你不喜欢for循环了？得到的答复基本上是一致的，这些原生提供的方法写起来“更舒服”，读起来也更容易理解代码在做什么。虽然这些方法不算是函数式，但是也已经向声明式进了一步了。</p>
<p>这个时候你一般会觉得很酷，想把更多的东西写成声明式的，然后噩梦就开始了，你的代码开始不可控。为啥呢？因为你想要吧自己的代码“变成”函数式的，但是函数式对你来说算是一种没有接触过的编程范式，你为了能够把自己的代码“套进”函数式的原则里，开始大量牺牲可读性，并且沾沾自喜，我会写函数式的代码了~然后同事开始质疑你写的这是啥，自己也发现渐渐看不懂自己的代码了，说好的可读性更强呢？明明是更烂了。</p>
<p>于是有一大批人在这个节点放弃了，并且加入了吐槽的大军中去，函数式可读性高？高个P，写出来的全是意大利<del>炮</del>面条。另外一部分人坚持下去了，并且开始逐渐理解函数式，在加强的函数式的各种理解后，代码的可读性终于在谷底反弹，并渐渐超越了过去的自己。</p>
<p>小黄书的作者Kyle用了3年让自己成为了一个函数式的工程师，他说自己在这中间也想过要放弃，在中间位置的部分比你想象的还要糟糕，所以如果你也想要尝试，那么请不要放弃，这不是一朝一夕能够改变的。</p>

    
  </div>
</article>

  </div>
  <aside id="aside-bar">
    
  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#命令式编程-Imperative-Programming-vs-声明式编程-Declarative-Programming"><span class="toc-text">命令式编程(Imperative Programming) vs 声明式编程(Declarative Programming)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#可读性"><span class="toc-text">可读性</span></a></li></ol>
  </div>


    
  <div id="recent-post" class="recent-post">
    <strong class="recent-post-title">
      近期文章
    </strong>
    <ul class="recent-post-list">
      
         <li class="recent-post-list">
           <a href="/20200516-react-concurrent-mode-suspense.html" title="React Concurrent Mode 之 Suspense 实践" >React Concurrent Mode 之 Suspense 实践</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20200304-devtool-editing-and-debugging.html" title="(1)你真的会用Chrome devtool吗?" >(1)你真的会用Chrome devtool吗?</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20200222-webpack-core-concepts.html" title="Webpack原理(3) — 核心概念" >Webpack原理(3) — 核心概念</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20200219-first-in-webpack.html" title="Webpack原理(2) — 加载原理" >Webpack原理(2) — 加载原理</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20200211-tdd-with-react-hooks.html" title="用React hooks实现TDD" >用React hooks实现TDD</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20200107-reduce-bundle-size.html" title="如何减小前端代码打包体积" >如何减小前端代码打包体积</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20190906-error-handler.html" title="React中的错误处理" >React中的错误处理</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20190903-compose.html" title="函数式初识(6) - 组合" >函数式初识(6) - 组合</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20190831-partial-and-currying.html" title="函数式初识(5) - 偏函数和柯里化" >函数式初识(5) - 偏函数和柯里化</a>
         </li>
      
         <li class="recent-post-list">
           <a href="/20190829-closure.html" title="函数式初识(4) - 闭包" >函数式初识(4) - 闭包</a>
         </li>
      
    </ul>
  </div>


  </aside>
</div>




  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/20190308-why-webpack.html">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/20190821-pure-function.html">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>





  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/categories/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tags/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'teobler';
    
    var disqus_url = 'https://teobler.com/20190818-why-fp.html';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//teobler.disqus.com/count.js" async></script>



    




    

    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
